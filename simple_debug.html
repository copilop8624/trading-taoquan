<!DOCTYPE html>
<html>
<head>
    <title>ğŸ› Simple Debug Test</title>
    <script>
        console.log('ğŸ” Debug script loaded');
        
        // Simple test function
        function simpleTest() {
            console.log('ğŸ§ª Starting simple test...');
            
            // Test 1: Check if elements exist
            const strategySelect = document.getElementById('strategySelect');
            const candleSelect = document.getElementById('candleSelect');
            
            console.log('ğŸ“ Strategy select element:', strategySelect);
            console.log('ğŸ“ Candle select element:', candleSelect);
            
            if (!strategySelect) {
                console.log('âŒ strategySelect not found');
                return;
            }
            
            if (!candleSelect) {
                console.log('âŒ candleSelect not found');
                return;
            }
            
            // Test 2: Test API directly
            console.log('ğŸ”— Testing /list_strategies API...');
            fetch('/list_strategies')
                .then(response => {
                    console.log('ğŸ“¡ Strategies response status:', response.status);
                    return response.json();
                })
                .then(data => {
                    console.log('ğŸ“Š Strategies data:', data);
                    
                    if (data.strategies && data.strategies.length > 0) {
                        console.log('âœ… Found', data.strategies.length, 'strategies');
                        
                        strategySelect.innerHTML = '<option value="">-- Chá»n Strategy --</option>';
                        data.strategies.forEach(strategy => {
                            const option = document.createElement('option');
                            option.value = `${strategy.symbol}_${strategy.timeframe}_${strategy.strategy_name}_v${strategy.version}`;
                            option.textContent = `${strategy.symbol} ${strategy.timeframe} - ${strategy.strategy_name} v${strategy.version}`;
                            strategySelect.appendChild(option);
                        });
                        console.log('âœ… Strategy select updated with', data.strategies.length, 'options');
                    }
                })
                .catch(error => {
                    console.error('âŒ Strategies fetch error:', error);
                });
            
            // Test 3: Test candles API
            console.log('ğŸ”— Testing /list_candle_files API...');
            fetch('/list_candle_files')
                .then(response => {
                    console.log('ğŸ“¡ Candles response status:', response.status);
                    return response.json();
                })
                .then(data => {
                    console.log('ğŸ“Š Candles data:', data);
                    
                    if (data.success && data.files && data.files.length > 0) {
                        console.log('âœ… Found', data.files.length, 'candle files');
                        
                        candleSelect.innerHTML = '<option value="">-- Chá»n Symbol & Timeframe --</option>';
                        data.files.forEach(file => {
                            const option = document.createElement('option');
                            option.value = file;
                            option.textContent = file.replace('BINANCE_', '').replace('.csv', '').replace('.db', '');
                            candleSelect.appendChild(option);
                        });
                        console.log('âœ… Candle select updated with', data.files.length, 'options');
                    }
                })
                .catch(error => {
                    console.error('âŒ Candles fetch error:', error);
                });
        }
    </script>
</head>
<body>
    <h1>ğŸ› Simple Debug Test</h1>
    <p>Má»Ÿ Developer Console (F12) Ä‘á»ƒ xem debug info</p>
    
    <h2>Test Elements:</h2>
    <div>
        <label>Strategy Select:</label>
        <select id="strategySelect">
            <option>Loading...</option>
        </select>
    </div>
    
    <div>
        <label>Candle Select:</label>
        <select id="candleSelect">
            <option>Loading...</option>
        </select>
    </div>
    
    <h2>Manual Test:</h2>
    <button onclick="simpleTest()">ğŸ§ª Run Simple Test</button>
    
    <script>
        // Auto-run test when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“„ Page DOM loaded');
            setTimeout(() => {
                console.log('â° Running auto test after 1 second...');
                simpleTest();
            }, 1000);
        });
    </script>
</body>
</html>