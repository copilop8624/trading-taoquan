<!DOCTYPE html>
<html>
<head>
    <title>üß™ Range Suggestion Functions Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .test-section { background: #e9f7ef; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .button-group { margin: 10px 0; }
        .btn { padding: 8px 16px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        .btn-success { background: #28a745; color: white; }
        .btn-info { background: #17a2b8; color: white; }
        .btn-warning { background: #ffc107; color: black; }
        .btn-secondary { background: #6c757d; color: white; }
        .form-group { margin: 10px 0; }
        .form-group label { display: inline-block; width: 120px; }
        .form-group input { width: 100px; padding: 5px; margin: 2px; }
        .result { background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .error { background: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .success { background: #d4edda; color: #155724; padding: 10px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Range Suggestion Functions Test</h1>
        <p>This page tests all 4 range suggestion functions to ensure they don't cause DOM element errors.</p>
        
        <div class="test-section">
            <h3>üìã Form Elements (Matching Web App Structure)</h3>
            <div class="form-group">
                <label>SL Min:</label><input type="number" id="sl_min" value="0.5">
                <label>SL Max:</label><input type="number" id="sl_max" value="3.0">
                <label>SL Step:</label><input type="number" id="sl_step" value="0.1">
            </div>
            <div class="form-group">
                <label>BE Min:</label><input type="number" id="be_min" value="0.2">
                <label>BE Max:</label><input type="number" id="be_max" value="1.5">
                <label>BE Step:</label><input type="number" id="be_step" value="0.05">
            </div>
            <div class="form-group">
                <label>TS Active Min:</label><input type="number" id="ts_active_min" value="2">
                <label>TS Active Max:</label><input type="number" id="ts_active_max" value="5">
                <label>TS Active Step:</label><input type="number" id="ts_active_step" value="0.1">
            </div>
            <div class="form-group">
                <label>TS Step Min:</label><input type="number" id="ts_step_min" value="3">
                <label>TS Step Max:</label><input type="number" id="ts_step_max" value="8">
                <label>TS Step Step:</label><input type="number" id="ts_step_step" value="1">
            </div>
        </div>
        
        <div class="test-section">
            <h3>üéØ Range Suggestion Buttons</h3>
            <div class="button-group">
                <button class="btn btn-success" onclick="testSmartRangeSuggestions()">
                    üß† Smart Range Suggestions
                </button>
                <button class="btn btn-info" onclick="testConservativeRanges()">
                    üõ°Ô∏è Conservative Ranges
                </button>
                <button class="btn btn-warning" onclick="testAggressiveRanges()">
                    üöÄ Aggressive Ranges
                </button>
                <button class="btn btn-secondary" onclick="testNarrowRanges()">
                    üìâ Narrow Ranges
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üìä Test Results</h3>
            <div id="testResults">
                <p>Click the buttons above to test each function...</p>
            </div>
        </div>
    </div>
    
    <script>
        // Test results tracking
        let testResults = {
            smart: { status: 'pending', error: null },
            conservative: { status: 'pending', error: null },
            aggressive: { status: 'pending', error: null },
            narrow: { status: 'pending', error: null }
        };
        
        function updateTestResults() {
            const resultsDiv = document.getElementById('testResults');
            let html = '<h4>üß™ Test Results:</h4>';
            
            Object.keys(testResults).forEach(test => {
                const result = testResults[test];
                if (result.status === 'pending') {
                    html += `<div class="result">‚è≥ ${test}: Not tested yet</div>`;
                } else if (result.status === 'success') {
                    html += `<div class="success">‚úÖ ${test}: PASSED - No DOM errors</div>`;
                } else if (result.status === 'error') {
                    html += `<div class="error">‚ùå ${test}: FAILED - ${result.error}</div>`;
                }
            });
            
            resultsDiv.innerHTML = html;
        }
        
        // Test Smart Range Suggestions
        function testSmartRangeSuggestions() {
            try {
                // Simulate smart suggestions with sample ranges
                const ranges = {
                    sl: {min: 1.0, max: 3.0, step: 0.2},
                    be: {min: 0.5, max: 1.5, step: 0.1},
                    ts: {min: 2.5, max: 4.0, step: 5}
                };
                
                applyRangeSuggestions(ranges);
                testResults.smart = { status: 'success', error: null };
            } catch (error) {
                testResults.smart = { status: 'error', error: error.message };
            }
            updateTestResults();
        }
        
        // Test Conservative Ranges
        function testConservativeRanges() {
            try {
                applyConservativeRanges();
                testResults.conservative = { status: 'success', error: null };
            } catch (error) {
                testResults.conservative = { status: 'error', error: error.message };
            }
            updateTestResults();
        }
        
        // Test Aggressive Ranges
        function testAggressiveRanges() {
            try {
                applyAggressiveRanges();
                testResults.aggressive = { status: 'success', error: null };
            } catch (error) {
                testResults.aggressive = { status: 'error', error: error.message };
            }
            updateTestResults();
        }
        
        // Test Narrow Ranges
        function testNarrowRanges() {
            try {
                applyNarrowRanges();
                testResults.narrow = { status: 'success', error: null };
            } catch (error) {
                testResults.narrow = { status: 'error', error: error.message };
            }
            updateTestResults();
        }
        
        // Copy range suggestion functions from main web app (FIXED VERSIONS)
        
        // ‚úÖ Apply Range Suggestions (FIXED)
        function applyRangeSuggestions(ranges) {
            document.getElementById('sl_min').value = ranges.sl.min;
            document.getElementById('sl_max').value = ranges.sl.max;
            document.getElementById('sl_step').value = ranges.sl.step;
            
            document.getElementById('be_min').value = ranges.be.min;
            document.getElementById('be_max').value = ranges.be.max;
            document.getElementById('be_step').value = ranges.be.step;
            
            document.getElementById('ts_active_min').value = ranges.ts.min;
            document.getElementById('ts_active_max').value = ranges.ts.max;
            document.getElementById('ts_step_min').value = ranges.ts.step;
            document.getElementById('ts_step_max').value = ranges.ts.step + 2;
            document.getElementById('ts_step_step').value = '1';
            
            console.log('‚úÖ Smart range suggestions applied successfully!');
        }
        
        // üõ°Ô∏è Apply Conservative Ranges (FIXED)
        function applyConservativeRanges() {
            document.getElementById('sl_min').value = '1.5';
            document.getElementById('sl_max').value = '4.0';
            document.getElementById('sl_step').value = '0.2';
            
            document.getElementById('be_min').value = '0.6';
            document.getElementById('be_max').value = '2.0';
            document.getElementById('be_step').value = '0.1';
            
            document.getElementById('ts_active_min').value = '2.5';
            document.getElementById('ts_active_max').value = '4.0';
            document.getElementById('ts_step_min').value = '5';
            document.getElementById('ts_step_max').value = '8';
            document.getElementById('ts_step_step').value = '1';
            
            console.log('‚úÖ Conservative ranges applied successfully!');
        }
        
        // üöÄ Apply Aggressive Ranges (FIXED)
        function applyAggressiveRanges() {
            document.getElementById('sl_min').value = '0.3';
            document.getElementById('sl_max').value = '1.5';
            document.getElementById('sl_step').value = '0.08';
            
            document.getElementById('be_min').value = '0.1';
            document.getElementById('be_max').value = '0.8';
            document.getElementById('be_step').value = '0.04';
            
            document.getElementById('ts_active_min').value = '2.0';
            document.getElementById('ts_active_max').value = '6.0';
            document.getElementById('ts_step_min').value = '3';
            document.getElementById('ts_step_max').value = '10';
            document.getElementById('ts_step_step').value = '0.5';
            
            console.log('‚úÖ Aggressive ranges applied successfully!');
        }
        
        // üìâ Apply Narrow Ranges (FIXED)
        function applyNarrowRanges() {
            document.getElementById('sl_min').value = '0.8';
            document.getElementById('sl_max').value = '1.5';
            document.getElementById('sl_step').value = '0.1';
            
            document.getElementById('be_min').value = '0.3';
            document.getElementById('be_max').value = '0.7';
            document.getElementById('be_step').value = '0.05';
            
            document.getElementById('ts_active_min').value = '2.5';
            document.getElementById('ts_active_max').value = '3.5';
            document.getElementById('ts_step_min').value = '4';
            document.getElementById('ts_step_max').value = '6';
            document.getElementById('ts_step_step').value = '1';
            
            console.log('‚úÖ Narrow ranges applied successfully!');
        }
        
        // Initialize test results display
        updateTestResults();
    </script>
</body>
</html>